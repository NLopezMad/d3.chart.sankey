{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///d3.chart.sankey.min.js","webpack:///webpack/bootstrap ac3f4f3802f763d57228","webpack:///./index.js","webpack:///./sankey.js","webpack:///external \"d3\"","webpack:///../~/d3-plugins-sankey/sankey.js","webpack:///./base.js","webpack:///external {\"root\":[\"d3\",\"chart\"],\"commonjs\":\"d3.chart\",\"commonjs2\":\"d3.chart\",\"amd\":\"d3.chart\"}","webpack:///./selection.js","webpack:///./path.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Sankey","Base","Selection","Path","d3","sankey","extend","initialize","textAnchor","node","align","chart","features","alignLabel","x","width","colorNodes","name","colorLinks","link","titleLinks","path","size","height","spread","iterations","nodeWidth","nodePadding","layers","links","base","append","classed","nodes","on","layer","dataBind","data","selectAll","insert","events","enter","e","trigger","merge","attr","style","d","Math","max","dy","sort","b","text","exit","remove","y","select","rgb","darker","transform","layout","_spreadNodes","relayout","_","arguments","length","draw","nodesByBreadth","nest","key","entries","map","values","forEach","sum","o","padding","y0","computeNodeLinks","sourceLinks","targetLinks","source","target","push","computeNodeValues","value","computeNodeBreadths","nextNodes","remainingNodes","dx","moveSinksRight","scaleNodeBreadths","kx","computeNodeDepths","initializeNodeDepth","ky","min","relaxLeftToRight","alpha","weightedSource","center","breadth","relaxRightToLeft","weightedTarget","slice","reverse","resolveCollisions","n","ascendingDepth","sortKeys","ascending","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","sy","ty","x0","x1","xi","interpolateNumber","x2","curvature","x3","y1","Chart","parentNode","clientWidth","clientHeight","margins","top","right","bottom","left","scale","category20c","update","selection","indexOf","unselectedOpacity","updateTransition","selectionLocked","transition","delay","apply","duration","updateTargetText","filter","s","Array","getConnections","direction","getConnectionsLink","getConnectionsNode","concat"],"mappings":"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","file":"d3.chart.sankey.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"d3.chart\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"d3.chart\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"d3.chart\")) : factory(root[\"d3\"], root[\"d3\"][\"chart\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*!\r\n * d3.chart.sankey - v0.4.0\r\n * License: MIT\r\n * Date: 2020-00-22\r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"d3.chart\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"d3.chart\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"d3.chart\")) : factory(root[\"d3\"], root[\"d3\"][\"chart\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint node: true */\r\n\t\r\n\tvar Sankey = __webpack_require__(1);\r\n\t\r\n\tSankey.Sankey = Sankey;\r\n\tSankey.Base = __webpack_require__(4);\r\n\tSankey.Selection = __webpack_require__(6);\r\n\tSankey.Path = __webpack_require__(7);\r\n\t\r\n\tmodule.exports = Sankey;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint node: true */\r\n\t\r\n\tvar d3 = __webpack_require__(2);\r\n\t//var sankey = require(\"d3-plugins-sankey\"); // @todo move loader to config and make it work\r\n\tvar sankey = __webpack_require__(3);\r\n\tvar Base = __webpack_require__(4);\r\n\t\r\n\tmodule.exports = Base.extend(\"Sankey\", {\r\n\t\r\n\t\tinitialize: function() {\r\n\t\t\tvar chart = this;\r\n\t\r\n\t\t\tchart.d3.sankey = sankey();\r\n\t\t\tchart.d3.path = chart.d3.sankey.link();\r\n\t\t\tchart.d3.sankey.size([chart.features.width, chart.features.height]);\r\n\t\r\n\t\t\tchart.features.spread = false;\r\n\t\t\tchart.features.iterations = 32;\r\n\t\t\tchart.features.nodeWidth = chart.d3.sankey.nodeWidth();\r\n\t\t\tchart.features.nodePadding = chart.d3.sankey.nodePadding();\r\n\t\t\tchart.features.alignLabel = \"auto\";\r\n\t\r\n\t\t\tchart.layers.links = chart.layers.base.append(\"g\").classed(\"links\", true);\r\n\t\t\tchart.layers.nodes = chart.layers.base.append(\"g\").classed(\"nodes\", true);\r\n\t\r\n\t\r\n\t\t\tchart.on(\"change:sizes\", function() {\r\n\t\t\t\tchart.d3.sankey.nodeWidth(chart.features.nodeWidth);\r\n\t\t\t\tchart.d3.sankey.nodePadding(chart.features.nodePadding);\r\n\t\t\t});\r\n\t\r\n\t\t\tchart.layer(\"links\", chart.layers.links, {\r\n\t\t\t\tdataBind: function(data) {\r\n\t\t\t\t\treturn this.selectAll(\".link\").data(data.links);\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tinsert: function() {\r\n\t\t\t\t\treturn this.append(\"path\").classed(\"link\", true);\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tevents: {\r\n\t\t\t\t\t\"enter\": function() {\r\n\t\t\t\t\t\tthis.on(\"mouseover\",  function(e) { chart.trigger(\"link:mouseover\", e); });\r\n\t\t\t\t\t\tthis.on(\"mousemove\",  function(e) { chart.trigger(\"link:mousemove\", e); });\r\n\t\t\t\t\t\tthis.on(\"mouseout\",   function(e) { chart.trigger(\"link:mouseout\",  e); });\r\n\t\t\t\t\t\tthis.on(\"click\",      function(e) { chart.trigger(\"link:click\",     e); });\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\t\"merge\": function() {\r\n\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t.attr(\"d\", chart.d3.path)\r\n\t\t\t\t\t\t\t.style(\"stroke\", colorLinks)\r\n\t\t\t\t\t\t\t.style(\"stroke-width\", function(d) { return Math.max(1, d.dy); })\r\n\t\t\t\t\t\t\t.sort(function(a, b) { return b.dy - a.dy; });\r\n\t\t\t\t\t\tif(titleLinks) {\r\n\t\t\t\t\t\t\tthis.append(\"title\")\r\n\t\t\t\t\t\t\t\t.text(titleLinks);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\t\"exit\": function() {\r\n\t\t\t\t\t\tthis.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\tchart.layer(\"nodes\", chart.layers.nodes, {\r\n\t\t\t\tdataBind: function(data) {\r\n\t\t\t\t\treturn this.selectAll(\".node\").data(data.nodes);\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tinsert: function() {\r\n\t\t\t\t\treturn this.append(\"g\").classed(\"node\", true).attr(\"data-node-id\", function(d) {\r\n\t\t\t\t\t\treturn d.id;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tevents: {\r\n\t\t\t\t\t\"enter\": function() {\r\n\t\t\t\t\t\tthis.append(\"rect\");\r\n\t\t\t\t\t\tthis.append(\"text\")\r\n\t\t\t\t\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t\t\t\t\t.attr(\"transform\", null);\r\n\t\r\n\t\t\t\t\t\tthis.on(\"mouseover\",  function(e) { chart.trigger(\"node:mouseover\", e); });\r\n\t\t\t\t\t\tthis.on(\"mousemove\",  function(e) { chart.trigger(\"node:mousemove\", e); });\r\n\t\t\t\t\t\tthis.on(\"mouseout\",   function(e) { chart.trigger(\"node:mouseout\",  e); });\r\n\t\t\t\t\t\tthis.on(\"click\",      function(e) { chart.trigger(\"node:click\",     e); });\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\t\"merge\": function() {\r\n\t\t\t\t\t\tthis.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\r\n\t\r\n\t\t\t\t\t\tthis.select(\"rect\")\r\n\t\t\t\t\t\t\t.attr(\"height\", function(d) { return d.dy; })\r\n\t\t\t\t\t\t\t.attr(\"width\", chart.features.nodeWidth)\r\n\t\t\t\t\t\t\t.style(\"fill\", colorNodes)\r\n\t\t\t\t\t\t\t.style(\"stroke\", function(d) { return d3.rgb(colorNodes(d)).darker(2); });\r\n\t\r\n\t\t\t\t\t\tthis.select(\"text\")\r\n\t\t\t\t\t\t\t.text(chart.features.name)\r\n\t\t\t\t\t\t\t.attr(\"y\", function(d) { return d.dy / 2; })\r\n\t\t\t\t\t\t\t.attr(\"x\", function(d) { return textAnchor(d) === \"start\" ? (6 + chart.features.nodeWidth) : -6; })\r\n\t\t\t\t\t\t\t.attr(\"text-anchor\", textAnchor);\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\t\"exit\": function() {\r\n\t\t\t\t\t\tthis.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\tfunction textAnchor(node) {\r\n\t\t\t\tvar align = chart.features.alignLabel;\r\n\t\t\t\tif (typeof(align) === \"function\") {\r\n\t\t\t\t\talign = align(node);\r\n\t\t\t\t}\r\n\t\t\t\tif (align === \"auto\") {\r\n\t\t\t\t\talign = node.x < chart.features.width / 2 ? \"start\" : \"end\";\r\n\t\t\t\t}\r\n\t\t\t\treturn align;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction colorNodes(node) {\r\n\t\t\t\tif (typeof chart.features.colorNodes === \"function\") {\r\n\t\t\t\t\t// allow using d3 scales, but also custom function with node as 2nd argument\r\n\t\t\t\t\treturn chart.features.colorNodes(chart.features.name(node), node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn chart.features.colorNodes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction colorLinks(link) {\r\n\t\t\t\tif (typeof chart.features.colorLinks === \"function\") {\r\n\t\t\t\t\t// always expect custom function, there\"s no sensible default with d3 scales here\r\n\t\t\t\t\treturn chart.features.colorLinks(link);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn chart.features.colorLinks;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction titleLinks(link) {\r\n\t\t\t\tif (typeof chart.features.titleLinks === \"function\") {\r\n\t\t\t\t\t// always expect custom function, there\"s no sensible default with d3 scales here\r\n\t\t\t\t\treturn chart.features.titleLinks(link);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn chart.features.titleLinks;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\r\n\t\ttransform: function(data) {\r\n\t\t\tvar chart = this;\r\n\t\r\n\t\t\tchart.data = data;\r\n\t\r\n\t\t\tchart.d3.sankey\r\n\t\t\t\t.nodes(data.nodes)\r\n\t\t\t\t.links(data.links)\r\n\t\t\t\t.layout(chart.features.iterations);\r\n\t\r\n\t\t\tif (this.features.spread) {\r\n\t\t\t\tthis._spreadNodes(data);\r\n\t\t\t\tchart.d3.sankey.relayout();\r\n\t\t\t}\r\n\t\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\r\n\t\r\n\t\titerations: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.iterations; }\r\n\t\t\tthis.features.iterations = _;\r\n\t\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\tnodeWidth: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.nodeWidth; }\r\n\t\t\tthis.features.nodeWidth = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:sizes\");\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\tnodePadding: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.nodePadding; }\r\n\t\t\tthis.features.nodePadding = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:sizes\");\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\tspread: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.spread; }\r\n\t\t\tthis.features.spread = _;\r\n\t\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\r\n\t\talignLabel: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.alignLabel; }\r\n\t\t\tthis.features.alignLabel = _;\r\n\t\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\t_spreadNodes: function(data) {\r\n\t\t\tvar chart = this,\r\n\t\t\t\t\tnodesByBreadth = d3.nest()\r\n\t\t\t\t\t.key(function(d) { return d.x; })\r\n\t\t\t\t\t.entries(data.nodes)\r\n\t\t\t\t\t.map(function(d) { return d.values; });\r\n\t\r\n\t\t\tnodesByBreadth.forEach(function(nodes) {\r\n\t\t\t\tvar i,\r\n\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\tsum = d3.sum(nodes, function(o) { return o.dy; }),\r\n\t\t\t\t\t\tpadding = (chart.features.height - sum) / nodes.length,\r\n\t\t\t\t\t\ty0 = 0;\r\n\t\t\t\tnodes.sort(function(a, b) { return a.y - b.y; });\r\n\t\t\t\tfor (i = 0; i < nodes.length; ++i) {\r\n\t\t\t\t\tnode = nodes[i];\r\n\t\t\t\t\tnode.y = y0;\r\n\t\t\t\t\ty0 += node.dy + padding;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n\t});\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*** IMPORTS FROM imports-loader ***/\n\tvar d3 = __webpack_require__(2);\n\t\n\td3.sankey = function() {\n\t  var sankey = {},\n\t      nodeWidth = 24,\n\t      nodePadding = 8,\n\t      size = [1, 1],\n\t      nodes = [],\n\t      links = [];\n\t\n\t  sankey.nodeWidth = function(_) {\n\t    if (!arguments.length) return nodeWidth;\n\t    nodeWidth = +_;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.nodePadding = function(_) {\n\t    if (!arguments.length) return nodePadding;\n\t    nodePadding = +_;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.nodes = function(_) {\n\t    if (!arguments.length) return nodes;\n\t    nodes = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.links = function(_) {\n\t    if (!arguments.length) return links;\n\t    links = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.size = function(_) {\n\t    if (!arguments.length) return size;\n\t    size = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.layout = function(iterations) {\n\t    computeNodeLinks();\n\t    computeNodeValues();\n\t    computeNodeBreadths();\n\t    computeNodeDepths(iterations);\n\t    computeLinkDepths();\n\t    return sankey;\n\t  };\n\t\n\t  sankey.relayout = function() {\n\t    computeLinkDepths();\n\t    return sankey;\n\t  };\n\t\n\t  sankey.link = function() {\n\t    var curvature = .5;\n\t\n\t    function link(d) {\n\t      var x0 = d.source.x + d.source.dx,\n\t          x1 = d.target.x,\n\t          xi = d3.interpolateNumber(x0, x1),\n\t          x2 = xi(curvature),\n\t          x3 = xi(1 - curvature),\n\t          y0 = d.source.y + d.sy + d.dy / 2,\n\t          y1 = d.target.y + d.ty + d.dy / 2;\n\t      return \"M\" + x0 + \",\" + y0\n\t           + \"C\" + x2 + \",\" + y0\n\t           + \" \" + x3 + \",\" + y1\n\t           + \" \" + x1 + \",\" + y1;\n\t    }\n\t\n\t    link.curvature = function(_) {\n\t      if (!arguments.length) return curvature;\n\t      curvature = +_;\n\t      return link;\n\t    };\n\t\n\t    return link;\n\t  };\n\t\n\t  // Populate the sourceLinks and targetLinks for each node.\n\t  // Also, if the source and target are not objects, assume they are indices.\n\t  function computeNodeLinks() {\n\t    nodes.forEach(function(node) {\n\t      node.sourceLinks = [];\n\t      node.targetLinks = [];\n\t    });\n\t    links.forEach(function(link) {\n\t      var source = link.source,\n\t          target = link.target;\n\t      if (typeof source === \"number\") source = link.source = nodes[link.source];\n\t      if (typeof target === \"number\") target = link.target = nodes[link.target];\n\t      source.sourceLinks.push(link);\n\t      target.targetLinks.push(link);\n\t    });\n\t  }\n\t\n\t  // Compute the value (size) of each node by summing the associated links.\n\t  function computeNodeValues() {\n\t    nodes.forEach(function(node) {\n\t      node.value = Math.max(\n\t        d3.sum(node.sourceLinks, value),\n\t        d3.sum(node.targetLinks, value)\n\t      );\n\t    });\n\t  }\n\t\n\t  // Iteratively assign the breadth (x-position) for each node.\n\t  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n\t  // nodes with no incoming links are assigned breadth zero, while\n\t  // nodes with no outgoing links are assigned the maximum breadth.\n\t  function computeNodeBreadths() {\n\t    var remainingNodes = nodes,\n\t        nextNodes,\n\t        x = 0;\n\t\n\t    while (remainingNodes.length) {\n\t      nextNodes = [];\n\t      remainingNodes.forEach(function(node) {\n\t        node.x = x;\n\t        node.dx = nodeWidth;\n\t        node.sourceLinks.forEach(function(link) {\n\t          nextNodes.push(link.target);\n\t        });\n\t      });\n\t      remainingNodes = nextNodes;\n\t      ++x;\n\t    }\n\t\n\t    //\n\t    moveSinksRight(x);\n\t    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n\t  }\n\t\n\t  function moveSourcesRight() {\n\t    nodes.forEach(function(node) {\n\t      if (!node.targetLinks.length) {\n\t        node.x = d3.min(node.sourceLinks, function(d) { return d.target.x; }) - 1;\n\t      }\n\t    });\n\t  }\n\t\n\t  function moveSinksRight(x) {\n\t    nodes.forEach(function(node) {\n\t      if (!node.sourceLinks.length) {\n\t        node.x = x - 1;\n\t      }\n\t    });\n\t  }\n\t\n\t  function scaleNodeBreadths(kx) {\n\t    nodes.forEach(function(node) {\n\t      node.x *= kx;\n\t    });\n\t  }\n\t\n\t  function computeNodeDepths(iterations) {\n\t    var nodesByBreadth = d3.nest()\n\t        .key(function(d) { return d.x; })\n\t        .sortKeys(d3.ascending)\n\t        .entries(nodes)\n\t        .map(function(d) { return d.values; });\n\t\n\t    //\n\t    initializeNodeDepth();\n\t    resolveCollisions();\n\t    for (var alpha = 1; iterations > 0; --iterations) {\n\t      relaxRightToLeft(alpha *= .99);\n\t      resolveCollisions();\n\t      relaxLeftToRight(alpha);\n\t      resolveCollisions();\n\t    }\n\t\n\t    function initializeNodeDepth() {\n\t      var ky = d3.min(nodesByBreadth, function(nodes) {\n\t        return (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value);\n\t      });\n\t\n\t      nodesByBreadth.forEach(function(nodes) {\n\t        nodes.forEach(function(node, i) {\n\t          node.y = i;\n\t          node.dy = node.value * ky;\n\t        });\n\t      });\n\t\n\t      links.forEach(function(link) {\n\t        link.dy = link.value * ky;\n\t      });\n\t    }\n\t\n\t    function relaxLeftToRight(alpha) {\n\t      nodesByBreadth.forEach(function(nodes, breadth) {\n\t        nodes.forEach(function(node) {\n\t          if (node.targetLinks.length) {\n\t            var y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n\t            node.y += (y - center(node)) * alpha;\n\t          }\n\t        });\n\t      });\n\t\n\t      function weightedSource(link) {\n\t        return center(link.source) * link.value;\n\t      }\n\t    }\n\t\n\t    function relaxRightToLeft(alpha) {\n\t      nodesByBreadth.slice().reverse().forEach(function(nodes) {\n\t        nodes.forEach(function(node) {\n\t          if (node.sourceLinks.length) {\n\t            var y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n\t            node.y += (y - center(node)) * alpha;\n\t          }\n\t        });\n\t      });\n\t\n\t      function weightedTarget(link) {\n\t        return center(link.target) * link.value;\n\t      }\n\t    }\n\t\n\t    function resolveCollisions() {\n\t      nodesByBreadth.forEach(function(nodes) {\n\t        var node,\n\t            dy,\n\t            y0 = 0,\n\t            n = nodes.length,\n\t            i;\n\t\n\t        // Push any overlapping nodes down.\n\t        nodes.sort(ascendingDepth);\n\t        for (i = 0; i < n; ++i) {\n\t          node = nodes[i];\n\t          dy = y0 - node.y;\n\t          if (dy > 0) node.y += dy;\n\t          y0 = node.y + node.dy + nodePadding;\n\t        }\n\t\n\t        // If the bottommost node goes outside the bounds, push it back up.\n\t        dy = y0 - nodePadding - size[1];\n\t        if (dy > 0) {\n\t          y0 = node.y -= dy;\n\t\n\t          // Push any overlapping nodes back up.\n\t          for (i = n - 2; i >= 0; --i) {\n\t            node = nodes[i];\n\t            dy = node.y + node.dy + nodePadding - y0;\n\t            if (dy > 0) node.y -= dy;\n\t            y0 = node.y;\n\t          }\n\t        }\n\t      });\n\t    }\n\t\n\t    function ascendingDepth(a, b) {\n\t      return a.y - b.y;\n\t    }\n\t  }\n\t\n\t  function computeLinkDepths() {\n\t    nodes.forEach(function(node) {\n\t      node.sourceLinks.sort(ascendingTargetDepth);\n\t      node.targetLinks.sort(ascendingSourceDepth);\n\t    });\n\t    nodes.forEach(function(node) {\n\t      var sy = 0, ty = 0;\n\t      node.sourceLinks.forEach(function(link) {\n\t        link.sy = sy;\n\t        sy += link.dy;\n\t      });\n\t      node.targetLinks.forEach(function(link) {\n\t        link.ty = ty;\n\t        ty += link.dy;\n\t      });\n\t    });\n\t\n\t    function ascendingSourceDepth(a, b) {\n\t      return a.source.y - b.source.y;\n\t    }\n\t\n\t    function ascendingTargetDepth(a, b) {\n\t      return a.target.y - b.target.y;\n\t    }\n\t  }\n\t\n\t  function center(node) {\n\t    return node.y + node.dy / 2;\n\t  }\n\t\n\t  function value(link) {\n\t    return link.value;\n\t  }\n\t\n\t  return sankey;\n\t};\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = d3.sankey;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint node: true */\r\n\t\r\n\tvar d3 = __webpack_require__(2);\r\n\tvar Chart = __webpack_require__(5);\r\n\t\r\n\t/*jshint newcap: false */\r\n\tmodule.exports = Chart(\"Sankey.Base\", {\r\n\t\r\n\t\tinitialize: function() {\r\n\t\t\tvar chart = this;\r\n\t\r\n\t\t\t// Inspired by d3.chart.layout.hierarchy's hierarchy.js, though also different\r\n\t\t\tchart.features\t= {};\r\n\t\t\tchart.d3\t\t\t\t= {};\r\n\t\t\tchart.layers\t\t= {};\r\n\t\r\n\t\t\t// when using faux-dom, be sure to set the width and height attributes\r\n\t\t\tif (!chart.base.attr(\"width\"))\t{ chart.base.attr(\"width\",\tchart.base.node().parentNode.clientWidth);\t}\r\n\t\t\tif (!chart.base.attr(\"height\")) { chart.base.attr(\"height\", chart.base.node().parentNode.clientHeight); }\r\n\t\r\n\t\t\t// dimensions, with space for node stroke and labels (smallest at bottom)\r\n\t\t\tchart.features.margins  = {top: 1, right: 1, bottom: 6, left: 1};\r\n\t\t\tchart.features.width    = chart.base.attr(\"width\") - chart.features.margins.left - chart.features.margins.right;\r\n\t\t\tchart.features.height   = chart.base.attr(\"height\") - chart.features.margins.top - chart.features.margins.bottom;\r\n\t\r\n\t\t\tchart.features.name     = function(d) { return d.name; };\r\n\t\t\t// there is no value property, because we also need to set it on parents\r\n\t\t\tchart.features.colorNodes = d3.scale.category20c();\r\n\t\t\tchart.features.colorLinks = null; // css styles by default\r\n\t\t\tchart.features.titleLinks = null; // css styles by default\r\n\t\r\n\t\t\tchart.layers.base = chart.base.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", \"translate(\" + chart.features.margins.left + \",\" + chart.features.margins.top + \")\");\r\n\t\t},\r\n\t\r\n\t\r\n\t\tname: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.name; }\r\n\t\t\tthis.features.name = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:name\");\r\n\t\t\tif (this.root) { this.draw(this.root); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\tcolorNodes: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.colorNodes; }\r\n\t\t\tthis.features.colorNodes = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:color\");\r\n\t\t\tif (this.root) { this.draw(this.root); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\tcolorLinks: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.colorLinks; }\r\n\t\t\tthis.features.colorLinks = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:color\");\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\r\n\t\ttitleLinks: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.titleLinks; }\r\n\t\t\tthis.features.titleLinks = _;\r\n\t\r\n\t\t\tif (this.data) { this.draw(this.data); }\r\n\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\r\n\t});\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint node: true */\r\n\t\r\n\tvar Sankey = __webpack_require__(1);\r\n\t\r\n\t// Sankey diagram with a hoverable selection\r\n\tmodule.exports = Sankey.extend(\"Sankey.Selection\", {\r\n\t\r\n\t\tinitialize: function() {\r\n\t\t\tvar chart = this;\r\n\t\r\n\t\t\tchart.features.selection = null;\r\n\t\t\tchart.features.selectionLocked = false;\r\n\t\t\tchart.features.unselectedOpacity = 0.2;\r\n\t\r\n\t\t\tchart.on(\"link:mouseover\", chart.selection);\r\n\t\t\tchart.on(\"link:mouseout\", function() { chart.selection(null); });\r\n\t\t\tchart.on(\"link:click\", function(_) {\r\n\t\t\t\tif(!chart.features.selectionLocked) {\r\n\t\t\t\t\tchart.features.selectionLocked = true;\r\n\t\t\t\t\tchart.selection(_);\r\n\t\t\t\t\tupdateTargetText();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchart.features.selectionLocked = false;\r\n\t\t\t\t\tchart.selection(null);\r\n\t\t\t\t\tchart.layers.base.selectAll(\".node .bold\").remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tchart.on(\"node:mouseover\", chart.selection);\r\n\t\t\tchart.on(\"node:mouseout\", function() { chart.selection(null); });\r\n\t\t\tchart.on(\"node:click\", function(_) {\r\n\t\t\t\tif(!chart.features.selectionLocked) {\r\n\t\t\t\t\tchart.features.selectionLocked = true;\r\n\t\t\t\t\tchart.selection(_);\r\n\t\t\t\t\tupdateTargetText();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchart.features.selectionLocked = false;\r\n\t\t\t\t\tchart.selection(null);\r\n\t\t\t\t\tchart.layers.base.selectAll(\".node .bold\").remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\t// going through the whole draw cycle can be a little slow, so we use\r\n\t\t\t// a selection changed event to update existing nodes directly\r\n\t\t\tchart.on(\"change:selection\", updateTransition);\r\n\t\t\tthis.layer(\"links\").on(\"enter\", update);\r\n\t\t\tthis.layer(\"nodes\").on(\"enter\", update);\r\n\t\r\n\t\t\tfunction update() {\r\n\t\t\t\t/*jshint validthis:true */\r\n\t\t\t\tif (chart.features.selection && chart.features.selection.length) {\r\n\t\t\t\t\treturn this.style(\"opacity\", function(o) {\r\n\t\t\t\t\t\treturn chart.features.selection.indexOf(o) >= 0 ? 1 : chart.features.unselectedOpacity;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.style(\"opacity\", 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction updateTransition() {\r\n\t\t\t\tif (!chart.features.selectionLocked) {\r\n\t\t\t\t\tvar transition = chart.layers.base.selectAll(\".node, .link\").transition();\r\n\t\t\t\t\tif (!chart.features.selection || !chart.features.selection.length) {\r\n\t\t\t\t\t\t// short delay for the deselect transition to avoid flicker\r\n\t\t\t\t\t\ttransition = transition.delay(100);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdate.apply(transition.duration(50));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction updateTargetText() {\r\n\t\t\t\tvar nodes = chart.layers.base.selectAll(\".node\");\r\n\t\t\t\tnodes\r\n\t\t\t\t\t.filter(function (o) {\r\n\t\t\t\t\t\treturn chart.features.selection.indexOf(o) >= 0 && o.targetLinks.length > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t\t\t.attr(\"y\", function(d) { return d.dy / 2; })\r\n\t\t\t\t\t.attr(\"x\", chart.features.nodeWidth/2)\r\n\t\t\t\t\t.attr(\"class\", \"bold\")\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.text(function (o) {\r\n\t\t\t\t\t\tvar value = \"\";\r\n\t\t\t\t\t\tchart.features.selection.forEach(function (s) {\r\n\t\t\t\t\t\t\tif(s.target && s.target.name === o.name) {\r\n\t\t\t\t\t\t\t\tvalue = s.value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tselection: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.selection; }\r\n\t\t\tthis.features.selection = (!_ || _ instanceof Array) ? _ : [_];\r\n\t\r\n\t\t\tthis.trigger(\"change:selection\");\r\n\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\r\n\t\tunselectedOpacity: function(_) {\r\n\t\t\tif (!arguments.length) { return this.features.unselectedOpacity; }\r\n\t\t\tthis.features.unselectedOpacity = _;\r\n\t\r\n\t\t\tthis.trigger(\"change:selection\");\r\n\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\r\n\t});\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint node: true */\r\n\t\r\n\tvar Selection = __webpack_require__(6);\r\n\t\r\n\t// Sankey diagram with a path-hover effect\r\n\tmodule.exports = Selection.extend(\"Sankey.Path\", {\r\n\t\r\n\t\tselection: function(_) {\r\n\t\t\tvar chart = this;\r\n\t\r\n\t\t\tif (!arguments.length) { return chart.features.selection; }\r\n\t\t\tchart.features.selection = (!_ || _ instanceof Array) ? _ : [_];\r\n\t\r\n\t\t\t// expand selection with connections\r\n\t\t\tif (chart.features.selection) {\r\n\t\t\t\tchart.features.selection.forEach(function(o) {\r\n\t\t\t\t\tgetConnections(o).forEach(function(p) {\r\n\t\t\t\t\t\tchart.features.selection.push(p);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\r\n\t\t\tchart.trigger(\"change:selection\");\r\n\t\r\n\t\t\treturn chart;\r\n\t\t}\r\n\t\r\n\t});\r\n\t\r\n\tfunction getConnections(o, direction) {\r\n\t\tif (o.source && o.target) {\r\n\t\t\treturn getConnectionsLink(o, direction);\r\n\t\t} else {\r\n\t\t\treturn getConnectionsNode(o, direction);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Return the link and its connected nodes with their links etc.\r\n\tfunction getConnectionsLink(o, direction) {\r\n\t\tvar links = [o];\r\n\t\tdirection = direction || \"both\";\r\n\t\r\n\t\tif (direction == \"source\" || direction == \"both\") {\r\n\t\t\tlinks = links.concat(getConnectionsNode(o.source, \"source\"));\r\n\t\t}\r\n\t\tif (direction == \"target\" || direction == \"both\") {\r\n\t\t\tlinks = links.concat(getConnectionsNode(o.target, \"target\"));\r\n\t\t}\r\n\t\r\n\t\treturn links;\r\n\t}\r\n\t\r\n\t// Return the node and its connected links. If direction is \"both\", just return\r\n\t// all links; if direction is \"source\", only return the source link when there\r\n\t// is one target link (or none, in which case the node is an endnode); if\r\n\t// direction is \"target\" vice versa. Open the product example to see why.\r\n\tfunction getConnectionsNode(o, direction) {\r\n\t\tvar links = [o];\r\n\t\tdirection = direction || \"both\";\r\n\t\r\n\t\tif ((direction == \"source\" && o.sourceLinks.length < 2) || direction == \"both\") {\r\n\t\t\to.targetLinks.forEach(function(p) { links = links.concat(getConnectionsLink(p, direction)); });\r\n\t\t}\r\n\t\tif ((direction == \"target\" && o.targetLinks.length < 2) || direction == \"both\") {\r\n\t\t\to.sourceLinks.forEach(function(p) { links = links.concat(getConnectionsLink(p, direction)); });\r\n\t\t}\r\n\t\r\n\t\treturn links;\r\n\t}\r\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// d3.chart.sankey.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac3f4f3802f763d57228","\"use strict\";\r\n/*jshint node: true */\r\n\r\nvar Sankey = require(\"./sankey\");\r\n\r\nSankey.Sankey = Sankey;\r\nSankey.Base = require(\"./base\");\r\nSankey.Selection = require(\"./selection\");\r\nSankey.Path = require(\"./path\");\r\n\r\nmodule.exports = Sankey;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 0\n// module chunks = 0","\"use strict\";\r\n/*jshint node: true */\r\n\r\nvar d3 = require(\"d3\");\r\n//var sankey = require(\"d3-plugins-sankey\"); // @todo move loader to config and make it work\r\nvar sankey = require(\"imports?d3!exports?d3.sankey!d3-plugins-sankey\");\r\nvar Base = require(\"./base\");\r\n\r\nmodule.exports = Base.extend(\"Sankey\", {\r\n\r\n\tinitialize: function() {\r\n\t\tvar chart = this;\r\n\r\n\t\tchart.d3.sankey = sankey();\r\n\t\tchart.d3.path = chart.d3.sankey.link();\r\n\t\tchart.d3.sankey.size([chart.features.width, chart.features.height]);\r\n\r\n\t\tchart.features.spread = false;\r\n\t\tchart.features.iterations = 32;\r\n\t\tchart.features.nodeWidth = chart.d3.sankey.nodeWidth();\r\n\t\tchart.features.nodePadding = chart.d3.sankey.nodePadding();\r\n\t\tchart.features.alignLabel = \"auto\";\r\n\r\n\t\tchart.layers.links = chart.layers.base.append(\"g\").classed(\"links\", true);\r\n\t\tchart.layers.nodes = chart.layers.base.append(\"g\").classed(\"nodes\", true);\r\n\r\n\r\n\t\tchart.on(\"change:sizes\", function() {\r\n\t\t\tchart.d3.sankey.nodeWidth(chart.features.nodeWidth);\r\n\t\t\tchart.d3.sankey.nodePadding(chart.features.nodePadding);\r\n\t\t});\r\n\r\n\t\tchart.layer(\"links\", chart.layers.links, {\r\n\t\t\tdataBind: function(data) {\r\n\t\t\t\treturn this.selectAll(\".link\").data(data.links);\r\n\t\t\t},\r\n\r\n\t\t\tinsert: function() {\r\n\t\t\t\treturn this.append(\"path\").classed(\"link\", true);\r\n\t\t\t},\r\n\r\n\t\t\tevents: {\r\n\t\t\t\t\"enter\": function() {\r\n\t\t\t\t\tthis.on(\"mouseover\",  function(e) { chart.trigger(\"link:mouseover\", e); });\r\n\t\t\t\t\tthis.on(\"mousemove\",  function(e) { chart.trigger(\"link:mousemove\", e); });\r\n\t\t\t\t\tthis.on(\"mouseout\",   function(e) { chart.trigger(\"link:mouseout\",  e); });\r\n\t\t\t\t\tthis.on(\"click\",      function(e) { chart.trigger(\"link:click\",     e); });\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"merge\": function() {\r\n\t\t\t\t\tthis\r\n\t\t\t\t\t\t.attr(\"d\", chart.d3.path)\r\n\t\t\t\t\t\t.style(\"stroke\", colorLinks)\r\n\t\t\t\t\t\t.style(\"stroke-width\", function(d) { return Math.max(1, d.dy); })\r\n\t\t\t\t\t\t.sort(function(a, b) { return b.dy - a.dy; });\r\n\t\t\t\t\tif(titleLinks) {\r\n\t\t\t\t\t\tthis.append(\"title\")\r\n\t\t\t\t\t\t\t.text(titleLinks);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"exit\": function() {\r\n\t\t\t\t\tthis.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tchart.layer(\"nodes\", chart.layers.nodes, {\r\n\t\t\tdataBind: function(data) {\r\n\t\t\t\treturn this.selectAll(\".node\").data(data.nodes);\r\n\t\t\t},\r\n\r\n\t\t\tinsert: function() {\r\n\t\t\t\treturn this.append(\"g\").classed(\"node\", true).attr(\"data-node-id\", function(d) {\r\n\t\t\t\t\treturn d.id;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tevents: {\r\n\t\t\t\t\"enter\": function() {\r\n\t\t\t\t\tthis.append(\"rect\");\r\n\t\t\t\t\tthis.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t\t\t\t.attr(\"transform\", null);\r\n\r\n\t\t\t\t\tthis.on(\"mouseover\",  function(e) { chart.trigger(\"node:mouseover\", e); });\r\n\t\t\t\t\tthis.on(\"mousemove\",  function(e) { chart.trigger(\"node:mousemove\", e); });\r\n\t\t\t\t\tthis.on(\"mouseout\",   function(e) { chart.trigger(\"node:mouseout\",  e); });\r\n\t\t\t\t\tthis.on(\"click\",      function(e) { chart.trigger(\"node:click\",     e); });\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"merge\": function() {\r\n\t\t\t\t\tthis.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\r\n\r\n\t\t\t\t\tthis.select(\"rect\")\r\n\t\t\t\t\t\t.attr(\"height\", function(d) { return d.dy; })\r\n\t\t\t\t\t\t.attr(\"width\", chart.features.nodeWidth)\r\n\t\t\t\t\t\t.style(\"fill\", colorNodes)\r\n\t\t\t\t\t\t.style(\"stroke\", function(d) { return d3.rgb(colorNodes(d)).darker(2); });\r\n\r\n\t\t\t\t\tthis.select(\"text\")\r\n\t\t\t\t\t\t.text(chart.features.name)\r\n\t\t\t\t\t\t.attr(\"y\", function(d) { return d.dy / 2; })\r\n\t\t\t\t\t\t.attr(\"x\", function(d) { return textAnchor(d) === \"start\" ? (6 + chart.features.nodeWidth) : -6; })\r\n\t\t\t\t\t\t.attr(\"text-anchor\", textAnchor);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"exit\": function() {\r\n\t\t\t\t\tthis.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction textAnchor(node) {\r\n\t\t\tvar align = chart.features.alignLabel;\r\n\t\t\tif (typeof(align) === \"function\") {\r\n\t\t\t\talign = align(node);\r\n\t\t\t}\r\n\t\t\tif (align === \"auto\") {\r\n\t\t\t\talign = node.x < chart.features.width / 2 ? \"start\" : \"end\";\r\n\t\t\t}\r\n\t\t\treturn align;\r\n\t\t}\r\n\r\n\t\tfunction colorNodes(node) {\r\n\t\t\tif (typeof chart.features.colorNodes === \"function\") {\r\n\t\t\t\t// allow using d3 scales, but also custom function with node as 2nd argument\r\n\t\t\t\treturn chart.features.colorNodes(chart.features.name(node), node);\r\n\t\t\t} else {\r\n\t\t\t\treturn chart.features.colorNodes;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction colorLinks(link) {\r\n\t\t\tif (typeof chart.features.colorLinks === \"function\") {\r\n\t\t\t\t// always expect custom function, there\"s no sensible default with d3 scales here\r\n\t\t\t\treturn chart.features.colorLinks(link);\r\n\t\t\t} else {\r\n\t\t\t\treturn chart.features.colorLinks;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction titleLinks(link) {\r\n\t\t\tif (typeof chart.features.titleLinks === \"function\") {\r\n\t\t\t\t// always expect custom function, there\"s no sensible default with d3 scales here\r\n\t\t\t\treturn chart.features.titleLinks(link);\r\n\t\t\t} else {\r\n\t\t\t\treturn chart.features.titleLinks;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\ttransform: function(data) {\r\n\t\tvar chart = this;\r\n\r\n\t\tchart.data = data;\r\n\r\n\t\tchart.d3.sankey\r\n\t\t\t.nodes(data.nodes)\r\n\t\t\t.links(data.links)\r\n\t\t\t.layout(chart.features.iterations);\r\n\r\n\t\tif (this.features.spread) {\r\n\t\t\tthis._spreadNodes(data);\r\n\t\t\tchart.d3.sankey.relayout();\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t},\r\n\r\n\r\n\titerations: function(_) {\r\n\t\tif (!arguments.length) { return this.features.iterations; }\r\n\t\tthis.features.iterations = _;\r\n\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tnodeWidth: function(_) {\r\n\t\tif (!arguments.length) { return this.features.nodeWidth; }\r\n\t\tthis.features.nodeWidth = _;\r\n\r\n\t\tthis.trigger(\"change:sizes\");\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tnodePadding: function(_) {\r\n\t\tif (!arguments.length) { return this.features.nodePadding; }\r\n\t\tthis.features.nodePadding = _;\r\n\r\n\t\tthis.trigger(\"change:sizes\");\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tspread: function(_) {\r\n\t\tif (!arguments.length) { return this.features.spread; }\r\n\t\tthis.features.spread = _;\r\n\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\r\n\talignLabel: function(_) {\r\n\t\tif (!arguments.length) { return this.features.alignLabel; }\r\n\t\tthis.features.alignLabel = _;\r\n\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t_spreadNodes: function(data) {\r\n\t\tvar chart = this,\r\n\t\t\t\tnodesByBreadth = d3.nest()\r\n\t\t\t\t.key(function(d) { return d.x; })\r\n\t\t\t\t.entries(data.nodes)\r\n\t\t\t\t.map(function(d) { return d.values; });\r\n\r\n\t\tnodesByBreadth.forEach(function(nodes) {\r\n\t\t\tvar i,\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tsum = d3.sum(nodes, function(o) { return o.dy; }),\r\n\t\t\t\t\tpadding = (chart.features.height - sum) / nodes.length,\r\n\t\t\t\t\ty0 = 0;\r\n\t\t\tnodes.sort(function(a, b) { return a.y - b.y; });\r\n\t\t\tfor (i = 0; i < nodes.length; ++i) {\r\n\t\t\t\tnode = nodes[i];\r\n\t\t\t\tnode.y = y0;\r\n\t\t\t\ty0 += node.dy + padding;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sankey.js\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 2\n// module chunks = 0","/*** IMPORTS FROM imports-loader ***/\nvar d3 = require(\"d3\");\n\nd3.sankey = function() {\n  var sankey = {},\n      nodeWidth = 24,\n      nodePadding = 8,\n      size = [1, 1],\n      nodes = [],\n      links = [];\n\n  sankey.nodeWidth = function(_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function(_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function(_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function(_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function(iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function() {\n    var curvature = .5;\n\n    function link(d) {\n      var x0 = d.source.x + d.source.dx,\n          x1 = d.target.x,\n          xi = d3.interpolateNumber(x0, x1),\n          x2 = xi(curvature),\n          x3 = xi(1 - curvature),\n          y0 = d.source.y + d.sy + d.dy / 2,\n          y1 = d.target.y + d.ty + d.dy / 2;\n      return \"M\" + x0 + \",\" + y0\n           + \"C\" + x2 + \",\" + y0\n           + \" \" + x3 + \",\" + y1\n           + \" \" + x1 + \",\" + y1;\n    }\n\n    link.curvature = function(_) {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(function(node) {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(function(link) {\n      var source = link.source,\n          target = link.target;\n      if (typeof source === \"number\") source = link.source = nodes[link.source];\n      if (typeof target === \"number\") target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(function(node) {\n      node.value = Math.max(\n        d3.sum(node.sourceLinks, value),\n        d3.sum(node.targetLinks, value)\n      );\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    var remainingNodes = nodes,\n        nextNodes,\n        x = 0;\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(function(node) {\n        node.x = x;\n        node.dx = nodeWidth;\n        node.sourceLinks.forEach(function(link) {\n          nextNodes.push(link.target);\n        });\n      });\n      remainingNodes = nextNodes;\n      ++x;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(function(node) {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, function(d) { return d.target.x; }) - 1;\n      }\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(function(node) {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(function(node) {\n      node.x *= kx;\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    var nodesByBreadth = d3.nest()\n        .key(function(d) { return d.x; })\n        .sortKeys(d3.ascending)\n        .entries(nodes)\n        .map(function(d) { return d.values; });\n\n    //\n    initializeNodeDepth();\n    resolveCollisions();\n    for (var alpha = 1; iterations > 0; --iterations) {\n      relaxRightToLeft(alpha *= .99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function initializeNodeDepth() {\n      var ky = d3.min(nodesByBreadth, function(nodes) {\n        return (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value);\n      });\n\n      nodesByBreadth.forEach(function(nodes) {\n        nodes.forEach(function(node, i) {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(function(link) {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      nodesByBreadth.forEach(function(nodes, breadth) {\n        nodes.forEach(function(node) {\n          if (node.targetLinks.length) {\n            var y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth.slice().reverse().forEach(function(nodes) {\n        nodes.forEach(function(node) {\n          if (node.sourceLinks.length) {\n            var y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(function(nodes) {\n        var node,\n            dy,\n            y0 = 0,\n            n = nodes.length,\n            i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(function(node) {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(function(node) {\n      var sy = 0, ty = 0;\n      node.sourceLinks.forEach(function(link) {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(function(link) {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  function center(node) {\n    return node.y + node.dy / 2;\n  }\n\n  function value(link) {\n    return link.value;\n  }\n\n  return sankey;\n};\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = d3.sankey;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/imports-loader?d3!../~/exports-loader?d3.sankey!../~/d3-plugins-sankey/sankey.js\n// module id = 3\n// module chunks = 0","\"use strict\";\r\n/*jshint node: true */\r\n\r\nvar d3 = require(\"d3\");\r\nvar Chart = require(\"d3.chart\");\r\n\r\n/*jshint newcap: false */\r\nmodule.exports = Chart(\"Sankey.Base\", {\r\n\r\n\tinitialize: function() {\r\n\t\tvar chart = this;\r\n\r\n\t\t// Inspired by d3.chart.layout.hierarchy's hierarchy.js, though also different\r\n\t\tchart.features\t= {};\r\n\t\tchart.d3\t\t\t\t= {};\r\n\t\tchart.layers\t\t= {};\r\n\r\n\t\t// when using faux-dom, be sure to set the width and height attributes\r\n\t\tif (!chart.base.attr(\"width\"))\t{ chart.base.attr(\"width\",\tchart.base.node().parentNode.clientWidth);\t}\r\n\t\tif (!chart.base.attr(\"height\")) { chart.base.attr(\"height\", chart.base.node().parentNode.clientHeight); }\r\n\r\n\t\t// dimensions, with space for node stroke and labels (smallest at bottom)\r\n\t\tchart.features.margins  = {top: 1, right: 1, bottom: 6, left: 1};\r\n\t\tchart.features.width    = chart.base.attr(\"width\") - chart.features.margins.left - chart.features.margins.right;\r\n\t\tchart.features.height   = chart.base.attr(\"height\") - chart.features.margins.top - chart.features.margins.bottom;\r\n\r\n\t\tchart.features.name     = function(d) { return d.name; };\r\n\t\t// there is no value property, because we also need to set it on parents\r\n\t\tchart.features.colorNodes = d3.scale.category20c();\r\n\t\tchart.features.colorLinks = null; // css styles by default\r\n\t\tchart.features.titleLinks = null; // css styles by default\r\n\r\n\t\tchart.layers.base = chart.base.append(\"g\")\r\n\t\t\t.attr(\"transform\", \"translate(\" + chart.features.margins.left + \",\" + chart.features.margins.top + \")\");\r\n\t},\r\n\r\n\r\n\tname: function(_) {\r\n\t\tif (!arguments.length) { return this.features.name; }\r\n\t\tthis.features.name = _;\r\n\r\n\t\tthis.trigger(\"change:name\");\r\n\t\tif (this.root) { this.draw(this.root); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tcolorNodes: function(_) {\r\n\t\tif (!arguments.length) { return this.features.colorNodes; }\r\n\t\tthis.features.colorNodes = _;\r\n\r\n\t\tthis.trigger(\"change:color\");\r\n\t\tif (this.root) { this.draw(this.root); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tcolorLinks: function(_) {\r\n\t\tif (!arguments.length) { return this.features.colorLinks; }\r\n\t\tthis.features.colorLinks = _;\r\n\r\n\t\tthis.trigger(\"change:color\");\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\ttitleLinks: function(_) {\r\n\t\tif (!arguments.length) { return this.features.titleLinks; }\r\n\t\tthis.features.titleLinks = _;\r\n\r\n\t\tif (this.data) { this.draw(this.data); }\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./base.js\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[\"d3\",\"chart\"],\"commonjs\":\"d3.chart\",\"commonjs2\":\"d3.chart\",\"amd\":\"d3.chart\"}\n// module id = 5\n// module chunks = 0","\"use strict\";\r\n/*jshint node: true */\r\n\r\nvar Sankey = require(\"./sankey\");\r\n\r\n// Sankey diagram with a hoverable selection\r\nmodule.exports = Sankey.extend(\"Sankey.Selection\", {\r\n\r\n\tinitialize: function() {\r\n\t\tvar chart = this;\r\n\r\n\t\tchart.features.selection = null;\r\n\t\tchart.features.selectionLocked = false;\r\n\t\tchart.features.unselectedOpacity = 0.2;\r\n\r\n\t\tchart.on(\"link:mouseover\", chart.selection);\r\n\t\tchart.on(\"link:mouseout\", function() { chart.selection(null); });\r\n\t\tchart.on(\"link:click\", function(_) {\r\n\t\t\tif(!chart.features.selectionLocked) {\r\n\t\t\t\tchart.features.selectionLocked = true;\r\n\t\t\t\tchart.selection(_);\r\n\t\t\t\tupdateTargetText();\r\n\t\t\t} else {\r\n\t\t\t\tchart.features.selectionLocked = false;\r\n\t\t\t\tchart.selection(null);\r\n\t\t\t\tchart.layers.base.selectAll(\".node .bold\").remove();\r\n\t\t\t}\r\n\t\t});\r\n\t\tchart.on(\"node:mouseover\", chart.selection);\r\n\t\tchart.on(\"node:mouseout\", function() { chart.selection(null); });\r\n\t\tchart.on(\"node:click\", function(_) {\r\n\t\t\tif(!chart.features.selectionLocked) {\r\n\t\t\t\tchart.features.selectionLocked = true;\r\n\t\t\t\tchart.selection(_);\r\n\t\t\t\tupdateTargetText();\r\n\t\t\t} else {\r\n\t\t\t\tchart.features.selectionLocked = false;\r\n\t\t\t\tchart.selection(null);\r\n\t\t\t\tchart.layers.base.selectAll(\".node .bold\").remove();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// going through the whole draw cycle can be a little slow, so we use\r\n\t\t// a selection changed event to update existing nodes directly\r\n\t\tchart.on(\"change:selection\", updateTransition);\r\n\t\tthis.layer(\"links\").on(\"enter\", update);\r\n\t\tthis.layer(\"nodes\").on(\"enter\", update);\r\n\r\n\t\tfunction update() {\r\n\t\t\t/*jshint validthis:true */\r\n\t\t\tif (chart.features.selection && chart.features.selection.length) {\r\n\t\t\t\treturn this.style(\"opacity\", function(o) {\r\n\t\t\t\t\treturn chart.features.selection.indexOf(o) >= 0 ? 1 : chart.features.unselectedOpacity;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn this.style(\"opacity\", 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction updateTransition() {\r\n\t\t\tif (!chart.features.selectionLocked) {\r\n\t\t\t\tvar transition = chart.layers.base.selectAll(\".node, .link\").transition();\r\n\t\t\t\tif (!chart.features.selection || !chart.features.selection.length) {\r\n\t\t\t\t\t// short delay for the deselect transition to avoid flicker\r\n\t\t\t\t\ttransition = transition.delay(100);\r\n\t\t\t\t}\r\n\t\t\t\tupdate.apply(transition.duration(50));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction updateTargetText() {\r\n\t\t\tvar nodes = chart.layers.base.selectAll(\".node\");\r\n\t\t\tnodes\r\n\t\t\t\t.filter(function (o) {\r\n\t\t\t\t\treturn chart.features.selection.indexOf(o) >= 0 && o.targetLinks.length > 0;\r\n\t\t\t\t})\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t\t.attr(\"y\", function(d) { return d.dy / 2; })\r\n\t\t\t\t.attr(\"x\", chart.features.nodeWidth/2)\r\n\t\t\t\t.attr(\"class\", \"bold\")\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.text(function (o) {\r\n\t\t\t\t\tvar value = \"\";\r\n\t\t\t\t\tchart.features.selection.forEach(function (s) {\r\n\t\t\t\t\t\tif(s.target && s.target.name === o.name) {\r\n\t\t\t\t\t\t\tvalue = s.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tselection: function(_) {\r\n\t\tif (!arguments.length) { return this.features.selection; }\r\n\t\tthis.features.selection = (!_ || _ instanceof Array) ? _ : [_];\r\n\r\n\t\tthis.trigger(\"change:selection\");\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunselectedOpacity: function(_) {\r\n\t\tif (!arguments.length) { return this.features.unselectedOpacity; }\r\n\t\tthis.features.unselectedOpacity = _;\r\n\r\n\t\tthis.trigger(\"change:selection\");\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./selection.js\n// module id = 6\n// module chunks = 0","\"use strict\";\r\n/*jshint node: true */\r\n\r\nvar Selection = require(\"./selection\");\r\n\r\n// Sankey diagram with a path-hover effect\r\nmodule.exports = Selection.extend(\"Sankey.Path\", {\r\n\r\n\tselection: function(_) {\r\n\t\tvar chart = this;\r\n\r\n\t\tif (!arguments.length) { return chart.features.selection; }\r\n\t\tchart.features.selection = (!_ || _ instanceof Array) ? _ : [_];\r\n\r\n\t\t// expand selection with connections\r\n\t\tif (chart.features.selection) {\r\n\t\t\tchart.features.selection.forEach(function(o) {\r\n\t\t\t\tgetConnections(o).forEach(function(p) {\r\n\t\t\t\t\tchart.features.selection.push(p);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tchart.trigger(\"change:selection\");\r\n\r\n\t\treturn chart;\r\n\t}\r\n\r\n});\r\n\r\nfunction getConnections(o, direction) {\r\n\tif (o.source && o.target) {\r\n\t\treturn getConnectionsLink(o, direction);\r\n\t} else {\r\n\t\treturn getConnectionsNode(o, direction);\r\n\t}\r\n}\r\n\r\n// Return the link and its connected nodes with their links etc.\r\nfunction getConnectionsLink(o, direction) {\r\n\tvar links = [o];\r\n\tdirection = direction || \"both\";\r\n\r\n\tif (direction == \"source\" || direction == \"both\") {\r\n\t\tlinks = links.concat(getConnectionsNode(o.source, \"source\"));\r\n\t}\r\n\tif (direction == \"target\" || direction == \"both\") {\r\n\t\tlinks = links.concat(getConnectionsNode(o.target, \"target\"));\r\n\t}\r\n\r\n\treturn links;\r\n}\r\n\r\n// Return the node and its connected links. If direction is \"both\", just return\r\n// all links; if direction is \"source\", only return the source link when there\r\n// is one target link (or none, in which case the node is an endnode); if\r\n// direction is \"target\" vice versa. Open the product example to see why.\r\nfunction getConnectionsNode(o, direction) {\r\n\tvar links = [o];\r\n\tdirection = direction || \"both\";\r\n\r\n\tif ((direction == \"source\" && o.sourceLinks.length < 2) || direction == \"both\") {\r\n\t\to.targetLinks.forEach(function(p) { links = links.concat(getConnectionsLink(p, direction)); });\r\n\t}\r\n\tif ((direction == \"target\" && o.targetLinks.length < 2) || direction == \"both\") {\r\n\t\to.sourceLinks.forEach(function(p) { links = links.concat(getConnectionsLink(p, direction)); });\r\n\t}\r\n\r\n\treturn links;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./path.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}